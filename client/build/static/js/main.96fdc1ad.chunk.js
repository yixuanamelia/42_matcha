(this.webpackJsonpmatcha=this.webpackJsonpmatcha||[]).push([[0],{146:function(e,t,a){e.exports=a(277)},151:function(e,t,a){},205:function(e,t){},269:function(e,t,a){},277:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(16),o=a.n(s),i=(a(151),a(145)),l=a(35),c=a(20),u=(a(152),a(2)),m=a.n(u),h=a(24),p=a(3),f=a(8),d=a(9),g=a(11),v=a(10),b=a(13),E=a(12),y=a(15),k=a(14),N=a(6),w=a.n(N),U="AUTH_USER",I="REGISTER_USER",P="RESET_PWD",C="EDIT_USER",O="GET_USER",x="GET_USER_INTRESTS",S="FETCH_ALL_USERS_PUBLIC_DATA",j="LOCATE_USER",A="LOGOUT_USER",_="GET_CURRENT_USER",B="GET_USER_LIKES",T="UPDATE_USER_LIKES",F="BLOCK_USER",L="VISIT_USER",M="GET_USER_NOTIFS",D="REPORT_USER",R="GET_CONTACT_CHAT",G="SAVE_USER_CHAT",H="GET_USER_CHAT_MSG",W="UPDATE_USER_UNLIKES";function z(e,t,a){w.a.get("http://localhost:3000/users/current/"+t,{headers:{Authorization:"Bearer "+e}}).then((function(e){a({type:_,payload:e.data})})).catch((function(e){a({type:_,payload:!1})}))}function q(e){var t=localStorage.getItem("token");return function(){var a=Object(p.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z(t,e,n);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}var Y=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={firstname:"",lastname:"",profilePhoto:""},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("userId"),e.next=3,this.props.onGetCurrentUserInfo(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProfilePicture",value:function(e,t){for(var a=[],n=0;n<e.length;)e[n].state===t&&a.push(e[n].path),n++;return a}},{key:"initProfileInformation",value:function(e){var t=e.info,a=this.getProfilePicture(e.pictures,1);this.setState({firstname:t.firstname,lastname:t.lastname,profilePhoto:a.length>0?a:""})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.getCurrentProfileInfo.data&&this.initProfileInformation(e.getCurrentProfileInfo.data)}},{key:"render",value:function(){var e="https://mgdetective.ma/wp-content/uploads/2018/05/profile.png";return r.a.createElement("header",{className:"main-header"},r.a.createElement("a",{href:"/",className:"logo"},r.a.createElement("span",{className:"logo-mini"},r.a.createElement("b",null,"LME")),r.a.createElement("span",{className:"logo-lg"},r.a.createElement("b",null,"Match"),"Me")),r.a.createElement("nav",{className:"navbar navbar-static-top"},r.a.createElement("a",{href:"/",className:"sidebar-toggle","data-toggle":"push-menu",role:"button"},r.a.createElement("span",{className:"sr-only"},"Toggle navigation")),r.a.createElement("div",{className:"navbar-custom-menu",style:{zIndex:"1223"}},r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",{className:"dropdown user user-menu"},r.a.createElement("a",{href:"/",className:"dropdown-toggle","data-toggle":"dropdown"},r.a.createElement("img",{src:""!==this.state.profilePhoto&&"https"===this.state.profilePhoto.toString().substring(0,5)?this.state.profilePhoto:""===this.state.profilePhoto?e:"http://localhost:3000/"+this.state.profilePhoto,className:"user-image",alt:"User Image5"}),r.a.createElement("span",{className:"hidden-xs"},this.state.firstname," ",this.state.lastname)),r.a.createElement("ul",{className:"dropdown-menu"},r.a.createElement("li",{className:"user-header"},r.a.createElement("img",{src:""!==this.state.profilePhoto&&"https"===this.state.profilePhoto.toString().substring(0,5)?this.state.profilePhoto:""===this.state.profilePhoto?e:"http://localhost:3000/"+this.state.profilePhoto,className:"img-circle",alt:"User Image7"}),r.a.createElement("p",null,this.state.firstname," ",this.state.lastname)),r.a.createElement("li",{className:"user-body"},r.a.createElement("div",{className:"row"})),r.a.createElement("li",{className:"user-footer"},r.a.createElement("div",{className:"pull-left"},r.a.createElement(c.c,{to:"/profile",onClick:this.props.navigateTo.bind(this,"/profile"),className:"btn btn-default btn-flat"},"Profile")),r.a.createElement("div",{className:"pull-right"},r.a.createElement(c.c,{to:"/logout",onClick:this.props.navigateTo.bind(this,"/logout"),className:"btn btn-default btn-flat"},"Deconnexion")))))))))}}]),t}(r.a.Component),J=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{getCurrentProfileInfo:e.getCurrentProfileInfo.getCurrentProfileInfo,location:e.location}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onGetCurrentUserInfo:function(t){return e(q(t))}}}))(Y),K=a(32),V=a.n(K),Q=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={firstname:"",socket:V()("http://localhost:3000"),lastname:"",profilePhoto:"",notifCount:0},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("userId"),e.next=3,this.props.onGetCurrentUserInfo(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProfilePicture",value:function(e,t){for(var a=[],n=0;n<e.length;)e[n].state===t&&a.push(e[n].path),n++;return a}},{key:"initProfileInformation",value:function(e){var t=e.info,a=this.getProfilePicture(e.pictures,1);this.setState({firstname:t.firstname,lastname:t.lastname,profilePhoto:a.length>0?a:""})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.getCurrentProfileInfo.data&&this.initProfileInformation(e.getCurrentProfileInfo.data)}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("userId");this.state.socket.connect(!0),this.state.socket.emit("join",t),this.state.socket.on("userNotifications",(function(t){e.setState({notifCount:t.length})}))}},{key:"componentWillUnmount",value:function(){this.state.socket.disconnect(!0)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("aside",{className:"main-sidebar",style:{height:"1200px"}},r.a.createElement("section",{className:"sidebar"},r.a.createElement("div",{className:"user-panel"},r.a.createElement("div",{className:"pull-left image"},r.a.createElement("img",{src:""!==this.state.profilePhoto&&"https"===this.state.profilePhoto.toString().substring(0,5)?this.state.profilePhoto:""===this.state.profilePhoto?"https://mgdetective.ma/wp-content/uploads/2018/05/profile.png":"http://localhost:3000/"+this.state.profilePhoto,className:"img-circle",alt:"User Imag1"})),r.a.createElement("div",{className:"pull-left info"},r.a.createElement("p",null,this.state.firstname," ",this.state.lastname),r.a.createElement("a",{href:"/"},r.a.createElement("i",{className:"fa fa-circle text-success"})," Online"))),r.a.createElement("form",{action:"#",method:"get",className:"sidebar-form"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",name:"q",className:"form-control",placeholder:"Search..."}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{type:"submit",name:"search",id:"search-btn",className:"btn btn-flat"},r.a.createElement("i",{className:"fa fa-search"}))))),r.a.createElement("ul",{className:"sidebar-menu","data-widget":"tree"},r.a.createElement("li",{className:"header"},"NAVIGATION PRINCIPALE"),r.a.createElement("li",{className:"active treeview"},r.a.createElement(c.c,{to:"/",onClick:this.props.navigateTo.bind(this,"/")},r.a.createElement("i",{className:"fa fa-dashboard"})," ",r.a.createElement("span",null,"Dashboard"))),r.a.createElement("li",null,r.a.createElement(c.c,{to:"/profile",onClick:this.props.navigateTo.bind(this,"/profile")},r.a.createElement("i",{className:"fa fa-files-o"}),r.a.createElement("span",null,"Profile"))),r.a.createElement("li",null,r.a.createElement(c.c,{to:"/chat",onClick:this.props.navigateTo.bind(this,"/chat")},r.a.createElement("i",{className:"fa fa-th"})," ",r.a.createElement("span",null,"Chat"),r.a.createElement("span",{className:"pull-right-container"}))),r.a.createElement("li",null,r.a.createElement(c.c,{to:"/Notifications",onClick:this.props.navigateTo.bind(this,"/Notifications")},r.a.createElement("i",{className:"fa fa-bell"})," ",r.a.createElement("span",null,"Notifications"),r.a.createElement("span",{className:"pull-right-container"},0!==this.state.notifCount?r.a.createElement("small",{className:"label pull-right bg-green"},this.state.notifCount):""))),r.a.createElement("li",null,r.a.createElement(c.c,{to:"/Suggestion",onClick:this.props.navigateTo.bind(this,"/Suggestion")},r.a.createElement("i",{className:"fa fa-heart"})," ",r.a.createElement("span",null,"Suggestion")))))))}}]),t}(r.a.Component),$=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{getCurrentProfileInfo:e.getCurrentProfileInfo.getCurrentProfileInfo,location:e.location}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onGetCurrentUserInfo:function(t){return e(q(t))}}}))(Q),X=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-inverse navbar-fixed-bottom"},r.a.createElement("div",{className:"text-center"},r.a.createElement("span",{className:"footer-text"}," \xa9 2019 Copyright",r.a.createElement("strong",null," Matcha")))))}}]),t}(n.Component),Z=a(52);function ee(e,t,a){w.a.get("http://localhost:3000/users/interests/"+t,{headers:{Authorization:"Bearer "+e}}).then((function(e){a({type:x,payload:e.data})})).catch((function(e){a({type:x,payload:!1})}))}function te(e){var t=localStorage.getItem("token");return function(){var a=Object(p.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ee(t,e,n);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}var ae=a(71);function ne(e){return e*(Math.PI/180)}function re(e,t){var a=[],n=e.split(","),r=[],s=0;return t.forEach((function(e){r=e.localisation.split(","),s=function(e,t,a,n){var r=ne(a-e),s=ne(n-t),o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(ne(e))*Math.cos(ne(a))*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}(n[0],n[1],r[0],r[1]),a[e.id]={id:e.id,dist:s}})),a}function se(e,t){var a=[];return e.forEach((function(e){parseInt(e.fame)>=parseInt(t)&&a.push(e.id)})),a}function oe(e,t){var a=[];return e.forEach((function(e){parseInt(e.age)>=parseInt(t[0])&&parseInt(e.age)<=parseInt(t[1])&&a.push(e.id)})),a}function ie(e,t){var a=[];return 0===t.length?e.forEach((function(e){a.push(e.id)})):e.forEach((function(e){e.tags.forEach((function(n){t.forEach((function(t){t===n&&a.push(e.id)}))}))})),a}function le(e,t){var a=[];return e.forEach((function(e){e.dist<=t&&a.push(e.id)})),a}function ce(){var e,t=[];e=1===arguments.length?arguments[0]:arguments;for(var a=0;a<e.length;a++)for(var n=e[a],r=0;r<n.length;r++){var s=n[r];if(-1===t.indexOf(s)){for(var o=!0,i=0;i<e.length;i++)if(-1===e[i].indexOf(s)){o=!1;break}o&&t.push(s)}}return t}function ue(e,t){return me.apply(this,arguments)}function me(){return(me=Object(p.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=[];if(null!==a[0].interests&&a[0].interests.forEach((function(e){r.push(e.value)})),200===t.code){var s=[],o=se(t.data,a[0].rangeFame),i=oe(t.data,a[0].age),l=ie(t.data,r),c=re(a[0].userPos,t.data),u=ce(o,i,l,le(c,a[0].rangeLocalisation));t.data.forEach((function(e){u.forEach((function(t){parseInt(e.id)===parseInt(t)&&(c.forEach((function(t){t.id===e.id&&(e.distance=t.dist)})),s.push(e))}))})),e(s)}else e([])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t){return pe.apply(this,arguments)}function pe(){return(pe=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],"B"===a?t.forEach((function(e){return n.push(e.id)})):t.forEach((function(e){e.gender===a&&n.push(e.id)})),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t){return de.apply(this,arguments)}function de(){return(de=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.forEach((function(e){e.dist<=a&&n.push(e.id)})),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t){return ve.apply(this,arguments)}function ve(){return(ve=Object(p.a)(m.a.mark((function e(t,a){var n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=parseInt(a)-30,s=parseInt(a)+30,t.forEach((function(e){parseInt(e.fame)>r&&parseInt(e.fame)<s&&n.push(e.id)})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(p.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(p.a)(m.a.mark((function e(n,r){var s,o,i,l,c,u,h;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.code){e.next=18;break}return s=[],e.next=4,he(t.data,a.wants);case 4:return o=e.sent,i=re(a.location,t.data),e.next=8,fe(i,1e4);case 8:return l=e.sent,c=ie(t.data,a.tags),e.next=12,ge(t.data,a.fame);case 12:u=e.sent,h=ce(o,l,c,u),t.data.forEach((function(e){h.forEach((function(t){parseInt(e.id)===parseInt(t)&&(i.forEach((function(t){t.id===e.id&&(e.distance=t.dist)})),s.push(e))}))})),n(s),e.next=19;break;case 18:n([]);case 19:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(p.a)(m.a.mark((function e(a,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===t.code?(r=re("48.8543,2.3527",t.data),t.data.forEach((function(e){r.forEach((function(t){t.id===e.id&&(e.distance=t.dist)}))})),a(t.data)):a([]);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e,t,a,n){return we.apply(this,arguments)}function we(){return(we=Object(p.a)(m.a.mark((function e(t,a,n,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.a.get("http://localhost:3000/users/publicData/"+n,{headers:{Authorization:"Bearer ".concat(a)}}).then(function(){var e=Object(p.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=11;break}return e.t0=r,e.t1=S,e.next=5,ye(a.data);case 5:e.t2=e.sent,e.t3={data:e.t2,code:200},e.t4={type:e.t1,payload:e.t3},(0,e.t0)(e.t4),e.next=30;break;case 11:if(!t.hasOwnProperty("Suggestion")){e.next=22;break}return e.t5=r,e.t6=S,e.next=16,be(a.data,t);case 16:e.t7=e.sent,e.t8={data:e.t7,code:200},e.t9={type:e.t6,payload:e.t8},(0,e.t5)(e.t9),e.next=30;break;case 22:return e.t10=r,e.t11=S,e.next=26,ue(a.data,t);case 26:e.t12=e.sent,e.t13={data:e.t12,code:200},e.t14={type:e.t11,payload:e.t13},(0,e.t10)(e.t14);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){r({type:S,payload:!1})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){var t=localStorage.getItem("token"),a=localStorage.getItem("userId");return function(){var n=Object(p.a)(m.a.mark((function n(r){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ne(e,t,a,r);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function Ie(e){w.a.get("http://ip-api.com/json").then((function(t){e({type:j,payload:t.data.lat+","+t.data.lon})})).catch((function(t){e({type:j,payload:""})}))}function Pe(){return function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var Ce=ae.b.Range,Oe=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).onLowerBoundChange=function(e){a.setState({lowerBound:+e.target.value})},a.onUpperBoundChange=function(e){a.setState({upperBound:+e.target.value})},a.onSliderChange=function(e){a.setState({value:e})},a.handleApply=function(){var e=a.state,t=e.lowerBound,n=e.upperBound;a.setState({value:[t,n]})},a.handleSelectChange=function(e){a.setState({selectedOption:e})},a.onChange=function(e){e.preventDefault(),a.setState(Object(h.a)({},e.target.name,e.target.value))},a.state={lowerBound:20,upperBound:40,value:[20,40],SearchBar:"",rangeFame:0,rangeLocalisation:20,SearchBarTags:"",interestsArray:[],selectedOption:[],location:""},a.handleUsersFilter=a.handleUsersFilter.bind(Object(b.a)(a)),a.onChange=a.onChange.bind(Object(b.a)(a)),a.handleSelectChange=a.handleSelectChange.bind(Object(b.a)(a)),a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"handleUsersFilter",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=[{userPos:this.state.location,rangeFame:this.state.rangeFame,age:this.state.value,interests:this.state.selectedOption,rangeLocalisation:parseInt(this.state.rangeLocalisation)}],e.next=4,this.props.onfetchAllUsersPublicData(a);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"UNSAFE_componentWillMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("userId"),e.next=3,this.props.onGetUserIntrests(t);case 3:return e.next=5,this.props.onGetUserLocation();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"UNSAFE_componentWillReceiveProps",value:function(e){void 0!==e.getUserInterests&&200===e.getUserInterests.code&&this.initInterestArray(e.getUserInterests.data),""===this.state.location&&""!==e.locateUser&&this.setState({location:e.locateUser})}},{key:"initInterestArray",value:function(e){this.setState({interestsArray:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{style:{marginBottom:"2rem"}},r.a.createElement("div",{className:"",style:{display:"flex",justifyContent:"space-around"}},r.a.createElement("div",{className:"",style:xe},r.a.createElement("h4",null,"Age"),r.a.createElement("p",null,"from ",this.state.value[0]," to ",this.state.value[1]),r.a.createElement(Ce,{allowCross:!1,value:this.state.value,onChange:this.onSliderChange}),r.a.createElement("h4",null,"Fame"),r.a.createElement("p",null,"search users above ",this.state.rangeFame," Fame"),r.a.createElement("input",{type:"range",className:"custom-range",id:"rangeFame",name:"rangeFame",min:"0",max:"100",value:this.state.rangeFame,onChange:this.onChange}),r.a.createElement("hr",null),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{onClick:function(t){e.handleUsersFilter(t)},type:"Search",className:"btn btn-primary btn-block"},"Search"))),r.a.createElement("div",{className:"",style:xe},r.a.createElement("h4",null,"Localisation"),r.a.createElement("p",null,"search users ",this.state.rangeLocalisation,"km","".concat(this.state.rangeLocalisation>1?"s":"")," from you"),r.a.createElement("input",{type:"range",className:"custom-range",id:"rangeLocalisation",name:"rangeLocalisation",min:"1",max:"20000",value:this.state.rangeLocalisation,onChange:this.onChange}),r.a.createElement("h4",null,"Select Interests"),r.a.createElement(Z.a,{isMulti:!0,isSearchable:!0,placeholder:"Select your interests",value:this.state.selectedOption,onChange:this.handleSelectChange,options:this.state.interestsArray}))))}}]),t}(n.Component),xe={width:"45%",float:"left",padding:"1rem",backgroundColor:"lightgray",marginTop:"2rem"},Se=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{fetchAllUsersPublicData:e.fetchAllUsersPublicData.fetchAllUsersPublicData,getUserInterests:e.getUserInterests.getUserInterests,location:e.location,locateUser:e.locateUser.locateUser}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onGetUserIntrests:function(t){return e(te(t))},onfetchAllUsersPublicData:function(t){return e(Ue(t))},onGetUserLocation:function(){return e(Pe())}}}))(Oe),je=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleChargeUser=function(e){e.preventDefault()},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t,a,n;return e=this.props.user.images.profile_pic?this.props.user.images.profile_pic:"https://images.unsplash.com/photo-1528892952291-009c663ce843?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=592&q=80",t=this.props.user.firstname?this.props.user.firstname:"Patrick",a=this.props.user.tags?this.props.user.tags:["biere","foot","netflix"],n=this.props.user.bio?this.props.user.bio:"salut les amis",r.a.createElement("div",{className:"card text-center",style:{width:"18rem",height:"40rem",float:"left",margin:"1rem"}},r.a.createElement("div",{className:"",style:{width:"18rem",height:"22rem",overflow:"hidden",position:"relative",display:"flex",alignItems:"center"}},r.a.createElement("img",{src:"http"!==e.substring(0,4)?"http://localhost:3000/"+e:e,className:"card-img-top ",alt:"",style:{objectFit:"cover",width:"100%"}})),r.a.createElement("h3",{className:"card-title"},t),r.a.createElement("nav",{style:{display:"flex",justifyContent:"space-around",overflow:"hidden"}},a.map((function(e,t){return t<3&&r.a.createElement("h5",{className:"card-subtitle",style:{borderRadius:"5px",border:"1px solid gainsboro",padding:"1px"},key:t},e.substr(0,10)!==e?e.substr(0,10)+"...":e)}))),r.a.createElement("p",{style:{height:"4rem"}},n.substr(0,40)===n?n:n.substr(0,40)+"..."),r.a.createElement(c.c,{to:"/profiledetail/"+this.props.user.id,onClick:this.props.navigateTo.bind(this,"/profiledetail/"+this.props.user.id)},r.a.createElement("button",{className:"btn btn-secondary btn-block",style:{backgroundColor:"#fcbde6"}},"See more")))}}]),t}(n.Component),Ae=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{location:e.location}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))}}}))(je),_e=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.users;return r.a.createElement("div",{style:Be},e.map((function(e,t){return r.a.createElement(Ae,{key:t,user:e})})))}}]),t}(n.Component),Be={width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"center"},Te=_e,Fe=a(54),Le=a.n(Fe),Me=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).onChange=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.target.value),"sortBy"!==t.target.name&&t.preventDefault(),a.setState(Object(h.a)({},t.target.name,t.target.value)),setTimeout(Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.filterUsers();case 2:case"end":return e.stop()}}),e)}))),50);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={sortBy:"age",initialUsers:[],interestsArray:[],userBuffer:[]},a.onChange=a.onChange.bind(Object(b.a)(a)),a.filterUsers=a.filterUsers.bind(Object(b.a)(a)),a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.onfetchAllUsersPublicData([]);case 2:return t=localStorage.getItem("userId"),e.next=5,this.props.onGetUserIntrests(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initUsers",value:function(e){this.setState({initialUsers:e,userBuffer:e})}},{key:"initInterestArray",value:function(e){this.setState({interestsArray:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){void 0!==e.getUserInterests&&200===e.getUserInterests.code&&this.initInterestArray(e.getUserInterests.data),void 0!==e.fetchAllUsersPublicData&&200===e.fetchAllUsersPublicData.code&&this.initUsers(e.fetchAllUsersPublicData.data)}},{key:"filterUsers",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],t=this.state.initialUsers,"fame"===this.state.sortBy||"age"===this.state.sortBy?(t=Le()(t).asc((function(e){return e[r.state.sortBy]})),console.log(t),this.setState({userBuffer:t})):"location"===this.state.sortBy?(t=Le()(t).asc((function(e){return e.distance})),this.setState({userBuffer:t})):"tags"===this.state.sortBy&&(a=[],null!==this.state.interestsArray&&this.state.interestsArray.forEach((function(e){a.push(e.value)})),n=[],a.forEach((function(e){t.forEach((function(t){t.tags.forEach((function(a){a===e&&n.push(t)}))}))})),t=n,this.setState({userBuffer:t}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.userBuffer;return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement($,null),r.a.createElement("div",null,r.a.createElement("div",{className:"content-wrapper"},r.a.createElement("section",{className:"content"},r.a.createElement("section",{className:"content"},r.a.createElement("br",null),r.a.createElement(Se,null),r.a.createElement("div",{style:{padding:"2rem"}},r.a.createElement("div",{style:{backgroundColor:"grey",height:"2rem",display:"flex",justifyContent:"center",alignItems:"center"}}," ",r.a.createElement("h4",null,"SORT BY")),r.a.createElement("div",{style:{backgroundColor:"grey",height:"5rem",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{style:De},r.a.createElement("div",null,"Age"),r.a.createElement("input",{type:"radio",name:"sortBy",value:"age",checked:"age"===this.state.sortBy,onChange:this.onChange})),r.a.createElement("div",{style:De},r.a.createElement("div",null,"Distance"),r.a.createElement("input",{type:"radio",name:"sortBy",value:"location",checked:"location"===this.state.sortBy,onChange:this.onChange})),r.a.createElement("div",{style:De},r.a.createElement("div",null,"Tags"),r.a.createElement("input",{type:"radio",name:"sortBy",value:"tags",checked:"tags"===this.state.sortBy,onChange:this.onChange})),r.a.createElement("div",{style:De},r.a.createElement("div",null,"Fame"),r.a.createElement("input",{type:"radio",name:"sortBy",value:"fame",checked:"fame"===this.state.sortBy,onChange:this.onChange})))),r.a.createElement(Te,{users:e}))))),r.a.createElement(X,null))}}]),t}(r.a.Component),De={textAlign:"center",width:"24%"},Re=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{fetchAllUsersPublicData:e.fetchAllUsersPublicData.fetchAllUsersPublicData,location:e.location,getUserInterests:e.getUserInterests.getUserInterests}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onGetUserIntrests:function(t){return e(te(t))},onfetchAllUsersPublicData:function(t){return e(Ue(t))}}}))(Me),Ge=a(23);var He=a(29),We=a(60),ze=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={password:"",email:""},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handlFormSubmit=a.handlFormSubmit.bind(Object(b.a)(a)),a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"handlFormSubmit",value:function(e){e.preventDefault(),this.props.onLoginUser(this.state)}},{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){""!==e.loginUser.msg&&204===e.loginUser.code&&We.fireNotification("error",e.loginUser.msg)}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-box"},r.a.createElement(He.a,null),r.a.createElement("div",{className:"login-logo"},r.a.createElement("b",null,"Matcha")),r.a.createElement("div",{className:"login-box-body"},r.a.createElement("p",{className:"login-box-msg"},"Sign in to start your session"),r.a.createElement("form",{onSubmit:this.handlFormSubmit,encType:"multipart/form-data"},r.a.createElement("div",{className:"form-group has-feedback"},r.a.createElement("input",{required:!0,type:"text",className:"form-control",name:"email",onChange:this.handleChange,placeholder:"Email or Username"}),r.a.createElement("span",{className:"glyphicon glyphicon-envelope form-control-feedback"})),r.a.createElement("div",{className:"form-group has-feedback"},r.a.createElement("input",{required:!0,type:"password",className:"form-control",name:"password",onChange:this.handleChange,placeholder:"Password"}),r.a.createElement("span",{className:"glyphicon glyphicon-lock form-control-feedback"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-8"},r.a.createElement("div",{className:"checkbox icheck"},r.a.createElement("label",null))),r.a.createElement("div",{className:"col-xs-4"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-flat"},"Sign In")))),r.a.createElement(c.c,{to:"/resetpwd",onClick:this.props.navigateTo.bind(this,"/resetpwd")},"Forgot your password ?"),r.a.createElement("br",null),r.a.createElement(c.c,{to:"/signup",onClick:this.props.navigateTo.bind(this,"/signup")},"Register a new membership")))}}]),t}(r.a.Component),qe=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{loginUser:e.loginUser.authenticated,location:e.location}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onLoginUser:function(t){return e((a=t,function(e){w.a.post("http://localhost:3000/users/login",{credentials:{email:a.email,password:a.password}},{"content-type":"application/x-www-form-urlencoded"}).then((function(t){if(200===t.data.code){var a=Object(Ge.createBrowserHistory)();localStorage.setItem("token",t.data.token),localStorage.setItem("userId",t.data.userId),a.push("/");var n=window.location.href;window.location.href=n}else e({type:U,payload:t.data}),setTimeout((function(){e({type:U,payload:""})}),10)})).catch((function(t){e({type:U,payload:""})}))}));var a}}}))(ze);function Ye(e,t,a){w.a.get("http://localhost:3000/users/logout/"+t,{headers:{Authorization:"Bearer "+e}}).then((function(e){a({type:A,payload:e.data})})).catch((function(e){a({type:A,payload:!1})}))}var Je=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.onUserLogout();case 2:t=Object(Ge.createBrowserHistory)(),localStorage.setItem("token",""),localStorage.setItem("userId",""),t.push("/login"),a=window.location.href,window.location.href=a;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(r.a.Component),Ke=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{location:e.location}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onUserLogout:function(){return e(function(){var e=localStorage.getItem("token"),t=localStorage.getItem("userId");return function(){var a=Object(p.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ye(e,t,n);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}())}}}))(Je),Ve=a(141),Qe=a.n(Ve);var $e=function(){return r.a.createElement("div",null,"Not found")};function Xe(e,t){w.a.post("http://localhost:3000/users/register",e).then((function(e){t({type:I,payload:e.data}),setTimeout((function(){t({type:I,payload:""})}),10)})).catch((function(e){t({type:I,payload:!1})}))}var Ze=a(60),et=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={firstname:"",lastname:"",pseudonyme:"",password:"",email:"",confPassword:"",resgiterUser:""},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handlFormSubmit=a.handlFormSubmit.bind(Object(b.a)(a)),a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"handlFormSubmit",value:function(e){e.preventDefault(),this.valdateFormData()&&this.props.onSignupUser(this.state)}},{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"valdateFormData",value:function(){var e=new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,15}/g);return this.state.password!==this.state.confPassword?(Ze.fireNotification("warning","Passwords does not match"),!1):this.state.password.length<8?(Ze.fireNotification("warning","Password must contain at least 8 characters"),!1):!!e.test(this.state.email)||(Ze.fireNotification("warning","Email not valid"),!1)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){""!==e.resgiterUser.msg&&204===e.resgiterUser.code&&Ze.fireNotification("error",e.resgiterUser.msg),""!==e.resgiterUser.msg&&200===e.resgiterUser.code&&Ze.fireNotification("success",e.resgiterUser.msg)}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-box"},r.a.createElement(He.a,null),r.a.createElement("div",{className:"login-logo"},r.a.createElement("b",null,"Matcha")),r.a.createElement("div",{className:"login-box-body"},r.a.createElement("p",{className:"login-box-msg"},r.a.createElement(c.c,{to:"/login",onClick:this.props.navigateTo.bind(this,"/login")},r.a.createElement("i",{className:"fa fa-backward pull-left"})),"Signup a new account"),r.a.createElement("form",{onSubmit:this.handlFormSubmit,encType:"multipart/form-data"},r.a.createElement("div",{className:"form-group has-feedback"},r.a.createElement("input",{required:!0,type:"text",className:"form-control",onChange:this.handleChange,name:"firstname",placeholder:"firstname"}),r.a.createElement("span",{className:"glyphicon glyphicon-book form-control-feedback"})),r.a.createElement("div",{className:"form-group has-feedback"},r.a.createElement("input",{required:!0,type:"text",className:"form-control",onChange:this.handleChange,name:"lastname",placeholder:"Lastname"}),r.a.createElement("span",{className:"glyphicon glyphicon-book form-control-feedback"})),r.a.createElement("div",{className:"form-group has-feedback"},r.a.createElement("input",{required:!0,type:"text",className:"form-control",onChange:this.handleChange,name:"pseudonyme",placeholder:"Pseudonyme"}),r.a.createElement("span",{className:"glyphicon glyphicon-book form-control-feedback"})),r.a.createElement("div",{className:"form-group has-feedback"},r.a.createElement("input",{required:!0,type:"email",className:"form-control",onChange:this.handleChange,name:"email",placeholder:"Email"}),r.a.createElement("span",{className:"glyphicon glyphicon-envelope form-control-feedback"})),r.a.createElement("div",{className:"form-group has-feedback"},r.a.createElement("input",{required:!0,type:"password",className:"form-control",onChange:this.handleChange,name:"password",placeholder:"Password"}),r.a.createElement("span",{className:"glyphicon glyphicon-lock form-control-feedback"})),r.a.createElement("div",{className:"form-group has-feedback"},r.a.createElement("input",{required:!0,type:"password",className:"form-control",onChange:this.handleChange,name:"confPassword",placeholder:"Confirm your password"}),r.a.createElement("span",{className:"glyphicon glyphicon-lock form-control-feedback"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-4 pull-right"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-flat"},"Register"))))))}}]),t}(r.a.Component),tt=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{location:e.location,resgiterUser:e.registerUser.registerUser}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onSignupUser:function(t){return e(function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xe(e,a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(et);function at(e,t,a,n){w.a.put("http://localhost:3000/users/"+t,a,{headers:{Authorization:"Bearer "+e}}).then((function(e){n({type:C,payload:e.data}),n({type:C,payload:""})})).catch((function(e){n({type:C,payload:!1})}))}function nt(e,t,a,n){w.a.get("http://localhost:3000/users/"+t+"/user/"+a,{headers:{Authorization:"Bearer "+e}}).then((function(e){n({type:O,payload:e.data})})).catch((function(e){n({type:O,payload:!1})}))}function rt(e){var t=localStorage.getItem("token"),a=localStorage.getItem("userId");return function(){var n=Object(p.a)(m.a.mark((function n(r){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,nt(t,e,a,r);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}var st=a(60),ot=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).handleSelectChange=function(e){a.setState({selectedOption:e})},a.state={firstname:"",singleHObbi:"",psudonym:"",lastname:"",showAddHobi:!1,profilePhoto:"",email:"",oldMultiPhotos:[],oldProfilePhoto:"",age:"",multiPhotos:[],Password:"",interestsArray:[],SexualOrientation:"",ProfileCompletion:"",gender:"",location:"",Fame:"",Bibliography:"",selectedOption:[]},a.handlePhotoesChange=a.handlePhotoesChange.bind(Object(b.a)(a)),a.handleSelectChange=a.handleSelectChange.bind(Object(b.a)(a)),a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.addHobytag=a.addHobytag.bind(Object(b.a)(a)),a.handlFormSubmitAction=a.handlFormSubmitAction.bind(Object(b.a)(a)),a.handleShowAddHoby=a.handleShowAddHoby.bind(Object(b.a)(a)),a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"validateData",value:function(){var e=new RegExp(/^([-+]?)([\d]{1,2})(((\.)(\d+)(,)))(\s*)(([-+]?)([\d]{1,3})((\.)(\d+))?)$/);return this.state.multiPhotos.length>4?(st.fireNotification("warning","You cn not upload more than 4 pictures"),!1):18>parseInt(this.state.age)>120?(st.fireNotification("warning","You don't have the legal age to date, this incident will be repported"),!1):""!==this.state.Password&&this.state.Password.length<8?(st.fireNotification("warning","Password must contain at least 8 characters."),!1):!(""!==this.state.location&&!e.test(this.state.location))||(st.fireNotification("warning","Locaiton must valid."),!1)}},{key:"UNSAFE_componentWillMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("userId"),e.next=3,this.props.onGetUserLocation();case 3:return e.next=5,this.props.onGetUserInfo(t);case 5:return e.next=7,this.props.onGetUserIntrests(t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props.locateUser;void 0!==e&&this.setState({location:e})}},{key:"handlFormSubmitAction",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=localStorage.getItem("userId"),!this.validateData()){e.next=6;break}return e.next=5,this.props.onEditThisUser(this.state);case 5:setTimeout(Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.onGetUserInfo(a);case 2:return e.next=4,n.props.onGetCurrentUserInfo(a);case 4:return e.next=6,n.props.onGetUserLocation();case 6:case"end":return e.stop()}}),e)}))),20);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePhotoesChange",value:function(e){e.preventDefault();var t=e.target;"file"===t.type&&this.setState({multiPhotos:t.files})}},{key:"handleShowAddHoby",value:function(e){e.preventDefault();var t=!this.state.showAddHobi;this.setState({showAddHobi:t})}},{key:"addHobytag",value:function(e){e.preventDefault();var t=this.state.interestsArray;if(""!==this.state.singleHObbi){var a={value:this.state.singleHObbi,label:this.state.singleHObbi};t.push(a),this.setState({singleHObbi:"",showAddHobi:!1,interestsArray:t})}else this.setState({singleHObbi:"",showAddHobi:!1})}},{key:"getProfilePicture",value:function(e,t){for(var a=[],n=0;n<e.length;)e[n].state===t&&a.push(e[n].path),n++;return a}},{key:"initProfileInformation",value:function(e){var t=e.info,a=this.getProfilePicture(e.pictures,1),n=this.getProfilePicture(e.pictures,0),r=e.tags;this.setState({firstname:t.firstname,psudonym:t.pseudo,lastname:t.lastname,oldProfilePhoto:a.length>0?a:"",profilePhoto:"",email:t.email,age:t.age,oldMultiPhotos:n,multiPhotos:[],selectedOption:r,SexualOrientation:t.sexual_orientation,ProfileCompletion:t.profile_completion,gender:t.gender,location:t.localisation,Fame:t.fame,Bibliography:t.bio})}},{key:"initInterestArray",value:function(e){this.setState({interestsArray:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){void 0!==e.getProfileInfo.data&&this.initProfileInformation(e.getProfileInfo.data),void 0!==e.getUserInterests&&200===e.getUserInterests.code&&this.initInterestArray(e.getUserInterests.data),""!==e.getProfileInfo&&204===e.getProfileInfo.code&&st.fireNotification("error",e.getProfileInfo.msg),""!==e.getProfileInfo&&500===e.getProfileInfo.code&&st.fireNotification("error",e.getProfileInfo.msg),""!==e.editProfile.msg&&204===e.editProfile.code&&st.fireNotification("error",e.editProfile.msg),""!==e.editProfile.msg&&500===e.editProfile.code&&st.fireNotification("error",e.editProfiler.msg),""!==e.editProfile.msg&&200===e.editProfile.code&&st.fireNotification("success",e.editProfile.msg),""===this.state.location.trim()&&void 0!==e.locateUser&&this.setState({location:e.locateUser})}},{key:"handleChange",value:function(e){e.preventDefault();var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;"file"===t.type?this.setState({profilePhoto:t.files[0]}):this.setState(Object(h.a)({},n,a))}},{key:"render",value:function(){var e=this;return""===this.state.location&&this.props.onGetUserLocation(),r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement(He.a,null),r.a.createElement("div",{className:"content-wrapper"},r.a.createElement("section",{className:"content-header"},r.a.createElement("br",null),r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",null,r.a.createElement("a",{href:"/"},r.a.createElement("i",{className:"fa fa-dashboard"})," Home")))),r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12",id:"fixMarginTop"},r.a.createElement("div",{className:"nav-tabs-custom"},r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"active"},r.a.createElement("a",{href:"#settings","data-toggle":"tab"},"Settings"))),r.a.createElement("div",{className:"tab-content"},r.a.createElement("div",{className:"active tab-pane",id:"settings"},r.a.createElement("form",{onSubmit:this.handlFormSubmitAction,encType:"multipart/form-data",className:"form-horizontal"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"Firstname"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",value:this.state.firstname,className:"form-control",id:"firstName",onChange:this.handleChange,name:"firstname",placeholder:"Enter your firstName"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"Lastname"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",value:this.state.lastname,className:"form-control",id:"lastName",name:"lastname",onChange:this.handleChange,placeholder:"Enter your Lastname"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"Psudonym"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",value:this.state.psudonym,className:"form-control",id:"psudonym",name:"psudonym",onChange:this.handleChange,placeholder:"Enter your Lastname"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"Email"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"email",className:"form-control",id:"inputEmail",value:this.state.email,name:"email",onChange:this.handleChange,placeholder:"Email"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"Age"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",className:"form-control",id:"age",value:this.state.age,name:"age",onChange:this.handleChange,placeholder:"Age"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"Gender"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("select",{className:"form-control",name:"gender",value:this.state.gender,onChange:this.handleChange},r.a.createElement("option",{value:""},"Select"),r.a.createElement("option",{value:"M"},"M"),r.a.createElement("option",{value:"F"},"F")))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"Location"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",value:this.state.location||"",className:"form-control",id:"location",name:"location",onChange:this.handleChange,placeholder:"Enter your location"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"Password"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"password",value:this.state.Password,className:"form-control",id:"Password",name:"Password",onChange:this.handleChange,placeholder:"Enter your Password"}),r.a.createElement("p",{style:{fontSize:"11px"},className:"help-block col-md-7 col-md-offse"},"Leave the password empty if you dont want to change it"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"SexualOrientation"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("select",{className:"form-control",name:"SexualOrientation",value:this.state.SexualOrientation,onChange:this.handleChange},r.a.createElement("option",{value:""},"Select"),r.a.createElement("option",{value:"B"},"Bisexual"),r.a.createElement("option",{value:"F"},"Heterosexual"),r.a.createElement("option",{value:"M"},"Homosexual")))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"ProfileCompletion"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{disabled:!0,type:"text",value:this.state.ProfileCompletion+" out of 11",className:"form-control",id:"ProfileCompletion",name:"ProfileCompletion",onChange:this.handleChange,placeholder:"Enter your ProfileCompletion link"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"Fame"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{disabled:!0,type:"text",value:this.state.Fame,className:"form-control",id:"Fame",name:"Fame",onChange:this.handleChange,placeholder:"Enter your Lastname"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"interests"),!1===this.state.showAddHobi?r.a.createElement("button",{onClick:function(t){e.handleShowAddHoby(t)},className:"btn btn-info"},r.a.createElement("i",{className:"fa fa-plus"})):r.a.createElement("button",{onClick:function(t){e.addHobytag(t)},className:"btn btn-success"},r.a.createElement("i",{className:"glyphicon glyphicon-ok"})),r.a.createElement("div",{className:"col-sm-9",style:{zIndex:"222"}},r.a.createElement(Z.a,{isMulti:!0,isSearchable:!0,placeholder:"Select your interests",value:this.state.selectedOption,onChange:this.handleSelectChange,options:this.state.interestsArray}))),!0===this.state.showAddHobi?r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"New hobby"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",value:this.state.singleHObbi,className:"form-control",id:"singleHObbi",name:"singleHObbi",onChange:this.handleChange,placeholder:"Add a new tag for hobby"}))):"",r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"Upload a photoes"),r.a.createElement("div",{className:"input-group image-preview col-md-8 files"},r.a.createElement("input",{type:"file",name:"multiPhotos",onChange:this.handlePhotoesChange,multiple:!0,accept:"image/png, image/jpeg, image/gif"}),r.a.createElement("p",{className:"help-block col-md-7"},"Only 4 photoes and format JPEG/PNG allowed."))),r.a.createElement("div",{className:"input-group image-preview col-md-10 col-md-offset-2"},this.state.oldMultiPhotos&&0===this.state.multiPhotos.length?this.state.oldMultiPhotos.map((function(e,t){return r.a.createElement("img",{key:t,style:{position:"relative",float:"left",width:"200px"},className:"img-responsive center-block",src:"https"===e.toString().substring(0,5)?e:"http://localhost:3000/"+e,alt:"pic holder"})})):""),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"Profile photo"),r.a.createElement("div",{className:"input-group image-preview col-md-8"},r.a.createElement("input",{type:"text",className:"form-control image-preview-filename",value:this.state.profilePhoto.name?this.state.profilePhoto.name:this.state.profilePhoto,disabled:"disabled"}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("div",{className:"btn btn-default image-preview-input"},r.a.createElement("span",{className:"glyphicon glyphicon-folder-open"}),r.a.createElement("span",{className:"image-preview-input-title"},"   Browse"),r.a.createElement("input",{id:"Photo",name:"profilePhoto",onChange:this.handleChange,type:"file",accept:"image/png, image/jpeg, image/gif"})))),r.a.createElement("div",{className:"input-group image-preview col-md-10 col-md-offset-2"},this.state.oldProfilePhoto&&""===this.state.profilePhoto?r.a.createElement("img",{style:{position:"relative",float:"left",width:"200px"},className:"img-responsive center-block",src:"https"===this.state.oldProfilePhoto.toString().substring(0,5)?this.state.oldProfilePhoto:"http://localhost:3000/"+this.state.oldProfilePhoto[0],alt:"pic holder"}):"")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 control-label"},"Bibliography"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("textarea",{value:this.state.Bibliography,id:"Bibliography",name:"Bibliography",rows:"5",cols:"42",onChange:this.handleChange}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"col-sm-offset-2 col-sm-10"},r.a.createElement("button",{type:"submit",className:"btn btn-info"},"Update"))))))))))),r.a.createElement($,null),r.a.createElement(X,null))}}]),t}(r.a.Component),it=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{locateUser:e.locateUser.locateUser,getUserInterests:e.getUserInterests.getUserInterests,getProfileInfo:e.getProfileInfo.getProfileInfo,editProfile:e.editProfile.profileEdited,location:e.location}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onEditThisUser:function(t){return e(function(e){var t=localStorage.getItem("token"),a=localStorage.getItem("userId");return function(){var n=Object(p.a)(m.a.mark((function n(r){var s,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=new FormData,o=0,""===e.profilePhoto){n.next=5;break}return n.next=5,s.append("file",e.profilePhoto,e.profilePhoto.name);case 5:if(!(o<e.multiPhotos.length&&e.multiPhotos.length>0)){n.next=11;break}return n.next=8,s.append("file",e.multiPhotos[o],e.multiPhotos[o].name);case 8:o++,n.next=5;break;case 11:if(s.append("firstname",e.firstname),s.append("lastname",e.lastname),s.append("email",e.email),s.append("Password",e.Password),s.append("age",e.age),s.append("psudonym",e.psudonym),s.append("SexualOrientation",e.SexualOrientation),s.append("gender",e.gender),s.append("location",e.location),s.append("Fame",e.Fame),s.append("Bibliography",e.Bibliography),s.append("profilePhoto",""!==e.profilePhoto?e.profilePhoto.name:""),o=0,void 0!==e.selectedOption&&null!==e.selectedOption){n.next=30;break}return e.selectedOption="",n.next=28,s.append("tags",e.selectedOption);case 28:n.next=37;break;case 30:o=0;case 31:if(!(o<e.selectedOption.length)){n.next=37;break}return n.next=34,s.append("tags",e.selectedOption[o].value.toLowerCase());case 34:o++,n.next=31;break;case 37:return n.next=39,at(t,a,s,r);case 39:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t))},onGetUserInfo:function(t){return e(rt(t))},onGetUserIntrests:function(t){return e(te(t))},onGetUserLocation:function(){return e(Pe())},onGetCurrentUserInfo:function(t){return e(q(t))}}}))(ot);var lt=a(60),ct=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={email:""},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handlFormSubmit=a.handlFormSubmit.bind(Object(b.a)(a)),a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"handlFormSubmit",value:function(e){e.preventDefault(),this.props.onResetPwdUser(this.state.email)}},{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){200===e.resetPwd.code&&lt.fireNotification("success",e.resetPwd.msg),""!==e.resetPwd&&205===e.resetPwd.code&&lt.fireNotification("warning",e.resetPwd.msg),""!==e.resetPwd&&500===e.resetPwd.code&&lt.fireNotification("error",e.resetPwd.msg)}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-box"},r.a.createElement(He.a,null),r.a.createElement("div",{className:"login-logo"},r.a.createElement("b",null,"Forget password")),r.a.createElement("div",{className:"login-box-body"},r.a.createElement("p",{className:"login-box-msg"},"Reinitialize your password",r.a.createElement(c.c,{to:"/login",onClick:this.props.navigateTo.bind(this,"/login")},r.a.createElement("i",{className:"fa fa-backward pull-left"})),"Signup a new account"),r.a.createElement("form",{onSubmit:this.handlFormSubmit,encType:"multipart/form-data"},r.a.createElement("div",{className:"form-group has-feedback"},r.a.createElement("input",{required:!0,type:"text",className:"form-control",name:"email",onChange:this.handleChange,placeholder:"Email or Username"}),r.a.createElement("span",{className:"glyphicon glyphicon-envelope form-control-feedback"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-4 pull-right"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-flat"},"Send"))))))}}]),t}(r.a.Component),ut=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{resetPwd:e.resetPwd.resetPwd,loginUser:e.loginUser.authenticated,location:e.location}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onResetPwdUser:function(t){return e((a=t,function(e){w.a.put("http://localhost:3000/users/resetpwd",{emailOrUsername:a},{"content-type":"application/x-www-form-urlencoded"}).then((function(t){e({type:P,payload:t.data}),setTimeout((function(){e({type:P,payload:""})}),10)})).catch((function(t){e({type:P,payload:!1})}))}));var a}}}))(ct);a(269);function mt(e,t,a){w.a.get("http://localhost:3000/users/chat/"+t,{headers:{Authorization:"Bearer "+e}}).then((function(e){a({type:R,payload:e.data})})).catch((function(e){a({type:R,payload:""})}))}var ht=a(26),pt=a.n(ht);function ft(e,t,a){w.a.post("http://localhost:3000/users/chat",t,{headers:{Authorization:"Bearer "+e}}).then((function(e){a({type:G,payload:e.data})})).catch((function(e){a({type:G,payload:""})}))}function dt(e,t,a,n){w.a.get("http://localhost:3000/users/chat/messages/"+t+"/"+a,{headers:{Authorization:"Bearer "+e}}).then((function(e){n({type:H,payload:e.data})})).catch((function(e){n({type:H,payload:""})}))}var gt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={socket:V()("http://localhost:3000"),firstname:"",lastname:"",profilePhoto:"",msgContent:"",allUserChatContact:[],messagesInfo:[],initChatMessage:r.a.createElement("li",{className:"left clearfix"},r.a.createElement("span",{className:"chat-img1 pull-left"},r.a.createElement("img",{src:"https://lh6.googleusercontent.com/-y-MY2satK-E/AAAAAAAAAAI/AAAAAAAAAJU/ER_hFddBheQ/photo.jpg",alt:"User Avatar",className:"img-circle"})),r.a.createElement("div",{className:"chat-body1 clearfix"},r.a.createElement("p",null,"Hello I am a robot. Welcome to your chat box choose a user to start chatting."),r.a.createElement("div",{className:"chat_time pull-right"},"09:40PM")))},a.sendMessageToUser=a.sendMessageToUser.bind(Object(b.a)(a)),a.selectChatContact=a.selectChatContact.bind(Object(b.a)(a)),a.handleChange=a.handleChange.bind(Object(b.a)(a)),a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("userId");this.state.socket.connect(!0),this.state.socket.emit("join",t),this.state.socket.on("send-new-msg",(function(t){if(void 0!==e.state.messagesInfo.dest_userId){var a=e.state.messagesInfo;a.messages.push(t),e.setState({messagesInfo:a})}}))}},{key:"handleChange",value:function(e){e.preventDefault();var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(h.a)({},n,a))}},{key:"sendMessageToUser",value:function(e){var t=this;e.preventDefault();var a=[],n={};0!==this.state.messagesInfo.length&&this.state.messagesInfo.messages?(a=this.state.messagesInfo,n={pos:"left",photo:this.state.profilePhoto,msgData:this.state.msgContent,data:pt()()},a.messages.push({pos:"right",photo:this.state.profilePhoto,msgData:this.state.msgContent,data:pt()()}),this.setState({messagesInfo:a}),this.props.onsaveUserChatAction(a),setTimeout((function(){t.state.socket.emit("new-msg",{msg:n,room:t.state.messagesInfo.dest_userId}),t.setState({msgContent:""});var e={id:parseInt(t.state.messagesInfo.source_userId)+parseInt(t.state.messagesInfo.dest_userId),title:"message",fullname:"",msg:" messaged you on chatApp ",likerId:parseInt(t.state.messagesInfo.source_userId),likedId:parseInt(t.state.messagesInfo.dest_userId),time:pt()()};t.state.socket.emit("likeUser",e)}),200)):console.log("Please choose a user to chat with !")}},{key:"UNSAFE_componentWillMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("userId"),e.next=3,this.props.onGetCurrentUserInfo(t);case 3:return e.next=5,this.props.onGetuserChatContact();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"selectChatContact",value:function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=localStorage.getItem("userId"),e.next=4,this.props.onGetuserChatMsg(a.userId);case 4:this.setState({messagesInfo:{dest_userId:a.userId,source_userId:n,dest_fullname:a.fullname,dest_photo:a.profilePhoto,messages:[]}}),setTimeout((function(){}),20);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getProfilePicture",value:function(e,t){for(var a=[],n=0;n<e.length;)e[n].state===t&&a.push(e[n].path),n++;return a}},{key:"initProfileInformation",value:function(e){var t=e.info,a=this.getProfilePicture(e.pictures,1);this.setState({firstname:t.firstname,lastname:t.lastname,profilePhoto:a.length>0?a:""})}},{key:"initMegList",value:function(e){var t=this;if(e&&e.length>0){var a;a=e.map((function(e){return{pos:e.source_user_id===parseInt(t.state.messagesInfo.source_userId)?"right":"left",photo:e.source_user_id===parseInt(t.state.messagesInfo.source_userId)?t.state.profilePhoto:t.state.messagesInfo.dest_photo,msgData:e.message_text,date:e.createdAt}}));var n=this.state.messagesInfo;n.messages=a,this.setState({messagesInfo:n})}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){""!==e.getContactChat&&200===e.getContactChat.code&&this.setState({allUserChatContact:e.getContactChat.data}),""!==e.getUserChatMsg&&200===e.getUserChatMsg.code&&this.initMegList(e.getUserChatMsg.data),e.getCurrentProfileInfo.data&&this.initProfileInformation(e.getCurrentProfileInfo.data)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement($,null),r.a.createElement("div",null,r.a.createElement("div",{className:"content-wrapper"},r.a.createElement("section",{className:"content"},r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"box box-primary",id:"fixMarginTop"},r.a.createElement("div",{className:"box-header with-border"},r.a.createElement("h3",{className:"box-title"},"Chat"),r.a.createElement("div",{className:"box-tools pull-right"},r.a.createElement("button",{type:"button",className:"btn btn-box-tool","data-widget":"collapse"},r.a.createElement("i",{className:"fa fa-minus"})),r.a.createElement("button",{type:"button",className:"btn btn-box-tool","data-widget":"remove"},r.a.createElement("i",{className:"fa fa-times"})))),r.a.createElement("div",{className:"box-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{style:{height:"100px"}},r.a.createElement("div",null,r.a.createElement("div",{className:"col-sm-3 chat_sidebar"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{id:"custom-search-input"},r.a.createElement("div",{className:"input-group col-md-12"},r.a.createElement("input",{type:"text",className:"  search-query form-control",placeholder:"Conversation"}),r.a.createElement("button",{className:"btn btn-danger",type:"button"},r.a.createElement("span",{className:" glyphicon glyphicon-search"})))),r.a.createElement("div",{className:"member_list"},r.a.createElement("ul",{className:"list-unstyled"},this.state.allUserChatContact?this.state.allUserChatContact.map((function(t,a){return""!==t.profilePhoto?r.a.createElement("li",{key:a,onClick:function(a){e.selectChatContact(a,t)},className:"left clearfix"},r.a.createElement("span",{className:"chat-img pull-left"},r.a.createElement("img",{src:"https"===t.profilePhoto.toString().substring(0,5)?t.profilePhoto:"http://localhost:3000/"+t.profilePhoto,alt:"User Avatar",className:"img-circle"})),r.a.createElement("div",{className:"chat-body clearfix"},r.a.createElement("div",{className:"header_sec"},r.a.createElement("strong",{className:"primary-font"},t.fullname)),r.a.createElement("div",{className:"contact_sec"}))):""})):"")))),r.a.createElement("div",{className:"col-sm-9 message_section"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"new_message_head"},r.a.createElement("div",{className:"pull-left"},r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-plus-square-o","aria-hidden":"true"})," New Message")),r.a.createElement("div",{className:"pull-right"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"dropdown-toggle",type:"button",id:"dropdownMenu1","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{className:"fa fa-cogs","aria-hidden":"true"}),"  Setting",r.a.createElement("span",{className:"caret"})),r.a.createElement("ul",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenu1"},r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"Action")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"Profile")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"Logout")))))),r.a.createElement("div",{className:"chat_area"},r.a.createElement("ul",{className:"list-unstyled"},0===this.state.messagesInfo.length?this.state.initChatMessage:"",0!==this.state.messagesInfo.length&&0===this.state.messagesInfo.messages.length?r.a.createElement("li",{className:"left clearfix"},r.a.createElement("div",{className:"chat-body1 clearfix"},r.a.createElement("p",null,"Now chatting with ",r.a.createElement("b",null,this.state.messagesInfo.dest_fullname)),r.a.createElement("div",{className:"chat_time pull-right"},"09:40PM"))):"",0!==this.state.messagesInfo.length&&this.state.messagesInfo.messages.length>0?this.state.messagesInfo.messages.map((function(e,t){return r.a.createElement("li",{key:t,className:"left clearfix admin_chat"},r.a.createElement("span",{className:"chat-img1 pull-"+e.pos},r.a.createElement("img",{src:"https"===e.photo.toString().substring(0,5)?e.photo:"http://localhost:3000/"+e.photo,alt:"User Avatar",className:"img-circle"})),r.a.createElement("div",{className:"chat-body1 clearfix"},r.a.createElement("p",null,e.msgData),r.a.createElement("div",{className:"chat_time pull-left"},pt()(e.date).fromNow())))})):"",r.a.createElement("li",{style:{marginBottom:"1.5vw"},id:"content"}))),r.a.createElement("div",{className:"message_write"},r.a.createElement("textarea",{className:"form-control",name:"msgContent",value:this.state.msgContent,onChange:this.handleChange,placeholder:"type a message"}),r.a.createElement("div",{className:"clearfix"}),r.a.createElement("div",{onClick:function(t){e.sendMessageToUser(t)},className:"chat_bottom"},r.a.createElement("a",{href:"#",className:"pull-left btn btn-success"},"Send"))))))))))))))))),r.a.createElement(X,null))}}]),t}(r.a.Component),vt=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{getUserChatMsg:e.getUserChatMsg.getUserChatMsg,getCurrentProfileInfo:e.getCurrentProfileInfo.getCurrentProfileInfo,getContactChat:e.getContactChat.getContactChat,location:e.location}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onGetuserChatContact:function(){return e(function(){var e=localStorage.getItem("token"),t=localStorage.getItem("userId");return function(){var a=Object(p.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,mt(e,t,n);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}())},onGetCurrentUserInfo:function(t){return e(q(t))},onsaveUserChatAction:function(t){return e(function(e){var t=localStorage.getItem("token");return function(){var a=Object(p.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ft(t,e,n);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t))},onGetuserChatMsg:function(t){return e(function(e){var t=localStorage.getItem("token"),a=localStorage.getItem("userId");return function(){var n=Object(p.a)(m.a.mark((function n(r){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,dt(t,a,e,r);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t))}}}))(gt);function bt(e,t,a){w.a.get("http://localhost:3000/users/likes/"+t,{headers:{Authorization:"Bearer "+e}}).then((function(e){a({type:B,payload:e.data})})).catch((function(e){a({type:B,payload:""})}))}function Et(e,t,a,n,r){w.a.post("http://localhost:3000/users/likes/"+e,{liker_user_id:n,has_been_liked_user_id:a},{headers:{Authorization:"Bearer "+t}}).then((function(e){r({type:T,payload:e.data})})).catch((function(e){r({type:T,payload:!1})}))}function yt(e,t,a,n){w.a.post("http://localhost:3000/users/block",{blocked_userId:t,blocker_userId:a},{headers:{Authorization:"Bearer "+e}}).then((function(e){n({type:F,payload:e.data}),setTimeout((function(){n({type:F,payload:""})}),20)})).catch((function(e){n({type:F,payload:!1})}))}function kt(e,t,a,n){w.a.post("http://localhost:3000/users/visit",{visited_userId:t,visiter_userId:a},{headers:{Authorization:"Bearer "+e}}).then((function(e){n({type:L,payload:e.data})})).catch((function(e){n({type:L,payload:!1})}))}function Nt(e,t,a,n){w.a.post("http://localhost:3000/users/unlikes",{unliker_user_id:a,has_been_unliked_user_id:t},{headers:{Authorization:"Bearer "+e}}).then((function(e){n({type:W,payload:e.data})})).catch((function(e){n({type:W,payload:!1})}))}function wt(e,t,a,n){w.a.post("http://localhost:3000/users/report",{reported_userId:t,reporter_userId:a},{headers:{Authorization:"Bearer "+e}}).then((function(e){n({type:D,payload:e.data}),setTimeout((function(){n({type:D,payload:""})}),20)})).catch((function(e){n({type:D,payload:!1})}))}var Ut=a(60),It=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={firstname:"",likes:0,dislikes:0,singleHObbi:"",psudonym:"",socket:V()("http://localhost:3000"),lastname:"",showAddHobi:!1,countLikes:0,userHasLikedMe:"",countdisLikes:0,profilePhoto:"",email:"",oldMultiPhotos:[],oldProfilePhoto:"",age:"",multiPhotos:[],Password:"",interestsArray:[],SexualOrientation:"",ProfileCompletion:"",online:"",updatedAt:"",gender:"",location:"",Fame:"",Bibliography:"",selectedOption:[]},a.handlelikes=a.handlelikes.bind(Object(b.a)(a)),a.handleBlock=a.handleBlock.bind(Object(b.a)(a)),a.handleReport=a.handleReport.bind(Object(b.a)(a)),a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"handleBlock",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props.match.params.id,e.next=4,this.props.onBlockThisUser(a);case 4:n=localStorage.getItem("userId"),setTimeout((function(){var e={id:n+a,title:"block",fullname:"",msg:" blocked your profile",likerId:n,likedId:a,time:pt()()};r.state.socket.emit("likeUser",e)}),320);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleReport",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props.match.params.id,e.next=4,this.props.onreportThisUser(a);case 4:n=localStorage.getItem("userId"),setTimeout((function(){var e={id:n+a,title:"report",fullname:"",msg:" reported your profile",likerId:n,likedId:a,time:pt()()};r.state.socket.emit("likeUser",e)}),320);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlelikes",value:function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,s=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.props.match.params.id,r=localStorage.getItem("userId"),e.next=5,this.props.onPutUpdateUserLikes(n,a);case 5:setTimeout(Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.props.onGetuserLikes(n);case 2:case"end":return e.stop()}}),e)}))),10),setTimeout((function(){var e={id:r+n,title:"",fullname:"",msg:"",likerId:r,likedId:n,time:pt()()};s.state.countDislikes<s.state.dislikes&&1===a&&(e.title="dislike",e.msg=" disliked your profile",s.state.socket.emit("likeUser",e)),s.state.countLikes<s.state.likes&&0===a&&(e.msg=" liked your profile",e.title="like",s.state.socket.emit("likeUser",e)),s.state.countLikes>s.state.likes&&(s.props.onPutUpdateUserUnlikes(n),0===a&&(e.msg=" unliked your profile",e.title="unlike",s.state.socket.emit("likeUser",e)));var t=s.state.likes,o=s.state.dislikes;s.setState({countLikes:t,countDislikes:o})}),320);case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getProfilePicture",value:function(e,t){for(var a=[],n=0;n<e.length;)e[n].state===t&&a.push(e[n].path),n++;return a}},{key:"initProfileInformation",value:function(e){var t=e.info,a=this.getProfilePicture(e.pictures,1),n=this.getProfilePicture(e.pictures,0),r=e.tags;this.setState({userHasLikedMe:e.liked,firstname:t.firstname,psudonym:t.pseudo,lastname:t.lastname,oldProfilePhoto:a.length>0?a:"",profilePhoto:"",email:t.email,online:t.online,updatedAt:t.updatedAt,age:t.age,oldMultiPhotos:n,multiPhotos:[],selectedOption:r,SexualOrientation:t.sexual_orientation,ProfileCompletion:t.profile_completion,gender:t.gender,location:t.localisation,Fame:t.fame,Bibliography:t.bio})}},{key:"initInterestArray",value:function(e){this.setState({interestsArray:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){void 0!==e.getUserLikes.data&&this.setState({likes:e.getUserLikes.data.likes,dislikes:e.getUserLikes.data.dislikes}),void 0!==e.getProfileInfo.data&&this.initProfileInformation(e.getProfileInfo.data),void 0!==e.getUserInterests&&200===e.getUserInterests.code&&this.initInterestArray(e.getUserInterests.data),void 0!==e.blockUser&&200===e.blockUser.code&&Ut.fireNotification("success",e.blockUser.msg),void 0!==e.reportUser&&200===e.reportUser.code&&Ut.fireNotification("success",e.reportUser.msg)}},{key:"UNSAFE_componentWillMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,this.props.onGetUserInfo(t);case 3:return e.next=5,this.props.onGetUserIntrests(t);case 5:return e.next=7,this.props.onGetuserLikes(t);case 7:return e.next=9,this.props.onVisitThisUser(t);case 9:a=localStorage.getItem("userId"),setTimeout((function(){var e=n.state.likes,r=n.state.dislikes;n.setState({countLikes:e,countDislikes:r});var s={id:a+t,title:"visit",fullname:"",msg:" has visited your profile",likerId:a,likedId:t,time:pt()()};n.state.socket.emit("likeUser",s)}),300);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.state.socket.disconnect(!0)}},{key:"componentDidMount",value:function(){var e=localStorage.getItem("userId");this.state.socket.connect(!0),this.state.socket.emit("join",e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement(He.a,null),r.a.createElement("div",{className:"content-wrapper"},r.a.createElement("section",{className:"content-header"},r.a.createElement("br",null),r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",null,r.a.createElement("a",{href:"/"},r.a.createElement("i",{className:"fa fa-dashboard"})," Home")))),r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"box box-primary",id:"fixMarginTop"},r.a.createElement("div",{className:"box-body box-profile"},this.state.oldProfilePhoto&&""===this.state.profilePhoto?r.a.createElement("img",{className:"profile-user-img img-responsive img-circle",src:"http"!==this.state.oldProfilePhoto.toString().substring(0,4)?"http://localhost:3000/"+this.state.oldProfilePhoto:this.state.oldProfilePhoto,alt:"pic holder"}):"",r.a.createElement("h3",{className:"profile-username text-center"},this.state.firstname," ",this.state.lastname),r.a.createElement("h5",{style:{fontSize:"16px"},className:"text-muted text-center"},0===this.state.online?"Last login : "+pt()().format("ll",this.state.updatedAt):"this user is online"),r.a.createElement("h5",{style:{fontSize:"12px"},className:"text-muted text-center"},0===this.state.online?pt()(this.state.updatedAt).fromNow():""),r.a.createElement("h5",{style:{fontSize:"12px"},className:"text-muted text-center"},!0===this.state.userHasLikedMe?"This User liked me":""),r.a.createElement("ul",{className:"list-group list-group-unbordered text-center"},r.a.createElement("li",{className:"list-group-item"},""===this.state.oldProfilePhoto&&0===this.state.oldMultiPhotos.length?"":r.a.createElement("span",null,r.a.createElement("button",{onClick:function(t){e.handlelikes(t,0)},className:"btn btn-primary"},"Like ",this.state.likes),r.a.createElement("button",{onClick:function(t){e.handlelikes(t,1)},className:"btn btn-warning"},"Dislike ",this.state.dislikes)),r.a.createElement("button",{onClick:function(t){e.handleBlock(t)},className:"btn btn-danger"},"Block"),r.a.createElement("button",{onClick:function(t){e.handleReport(t)},className:"btn btn-danger"},"Report"))))),r.a.createElement("div",{className:"box box-primary"},r.a.createElement("div",{className:"box-header with-border"},r.a.createElement("h3",{className:"box-title"},"About Me")),r.a.createElement("div",{className:"box-body"},r.a.createElement("strong",null,r.a.createElement("i",{className:" margin-r-5"})," Pseudo : ",this.state.psudonym),r.a.createElement("hr",null),r.a.createElement("strong",null,r.a.createElement("i",{className:" margin-r-5"})," Age : ",this.state.age),r.a.createElement("hr",null),r.a.createElement("strong",null,r.a.createElement("i",{className:" margin-r-5"})," Gender : ",this.state.gender),r.a.createElement("hr",null),r.a.createElement("strong",null,r.a.createElement("i",{className:" margin-r-5"})," Location : ",this.state.location),r.a.createElement("hr",null),r.a.createElement("strong",null,r.a.createElement("i",{className:" margin-r-5"})," SexualOrientation : ",this.state.SexualOrientation),r.a.createElement("hr",null),r.a.createElement("strong",null,r.a.createElement("i",{className:" margin-r-5"})," Profile completion : ",this.state.ProfileCompletion),r.a.createElement("hr",null),r.a.createElement("strong",null,r.a.createElement("i",{className:" margin-r-5"})," Fame : ",this.state.Fame),r.a.createElement("hr",null),r.a.createElement("strong",null,r.a.createElement("i",{className:" margin-r-5"})," Interests :"),this.state.selectedOption?this.state.selectedOption.map((function(e,t){return r.a.createElement("p",{key:t},e.label)})):"",r.a.createElement("hr",null),r.a.createElement("strong",null,r.a.createElement("i",{className:" margin-r-5"})," Images :"),r.a.createElement("div",{className:"input-group image-preview col-md-10 col-md-offset-2"},this.state.oldMultiPhotos&&0===this.state.multiPhotos.length?this.state.oldMultiPhotos.map((function(e,t){return r.a.createElement("img",{key:t,style:{position:"relative",float:"left",width:"200px"},className:"img-responsive center-block",src:1!==e.indexOf("http")?"http://localhost:3000/"+e:e,alt:"pic holder"})})):""),r.a.createElement("div",null),r.a.createElement("hr",null),r.a.createElement("strong",null,r.a.createElement("i",{className:" margin-r-5"})," Bibliography : ",this.state.Bibliography))))))),r.a.createElement($,null),r.a.createElement(X,null))}}]),t}(r.a.Component),Pt=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{reportUser:e.reportUser.reportUser,blockUser:e.blockUser.blockUser,getUserLikes:e.getUserLikes.getUserLikes,location:e.location,getUserInterests:e.getUserInterests.getUserInterests,getProfileInfo:e.getProfileInfo.getProfileInfo}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onGetUserInfo:function(t){return e(rt(t))},onGetUserIntrests:function(t){return e(te(t))},onGetuserLikes:function(t){return e(function(e){var t=localStorage.getItem("token");return function(){var a=Object(p.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,bt(t,e,n);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(t))},onPutUpdateUserLikes:function(t,a){return e(function(e,t){var a=localStorage.getItem("token"),n=localStorage.getItem("userId");return function(){var r=Object(p.a)(m.a.mark((function r(s){return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Et(t,a,e,n,s);case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(t,a))},onBlockThisUser:function(t){return e(function(e,t){var a=localStorage.getItem("token"),n=localStorage.getItem("userId");return function(){var t=Object(p.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yt(a,e,n,r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},onVisitThisUser:function(t){return e(function(e,t){var a=localStorage.getItem("token"),n=localStorage.getItem("userId");return function(){var t=Object(p.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kt(a,e,n,r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},onreportThisUser:function(t){return e(function(e,t){var a=localStorage.getItem("token"),n=localStorage.getItem("userId");return function(){var t=Object(p.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wt(a,e,n,r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},onPutUpdateUserUnlikes:function(t){return e(function(e){var t=localStorage.getItem("token"),a=localStorage.getItem("userId");return function(){var n=Object(p.a)(m.a.mark((function n(r){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Nt(t,e,a,r);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t))}}}))(It),Ct=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={socket:V()("http://localhost:3000")},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=localStorage.getItem("userId");this.state.socket.connect(!0),this.state.socket.emit("join",e)}},{key:"componentDidMount",value:function(){var e=localStorage.getItem("userId");this.state.socket.emit("initNotification",e)}},{key:"componentWillUnmount",value:function(){this.state.socket.disconnect(!0)}},{key:"render",value:function(){var e=this.props.notif,t=e.from,a=e.option,n=e.date,s=e.id,o="",i={},l="",u="",m="";return"message"===a.type?(o="alert alert-success",l="fa fa-envelope text-blue",m=" has sent you a message",i={border:"1px solid blue"},null!==a.message&&(u=a.message)):"visit"===a.type?(o="alert alert-warning",l="fa fa-eye",m=" has visited profil."):"like"===a.type?(o="alert alert-info",l="fa fa-thumbs-up",m=" liked your profile"):"dislike"===a.type?(o="alert alert-warning",l="fa fa-thumbs-down",m=" disliked your profile"):"block"===a.type?(o="alert alert-danger",l="fa fa-ban",m=" blocked your profile"):"report"===a.type?(o="alert alert-danger",l="fa fa-ban",m=" reported your profile"):"unlike"===a.type&&(o="alert alert-info",l="fa fa-trash",m=" unliked your profile"),!0===a.read&&(o="alert alert-success",i={},"message"===a.type&&(l="fa fa-envelope")),r.a.createElement("div",{className:o,style:i},r.a.createElement("div",{className:"",style:{display:"flex",justifyContent:"center"}},r.a.createElement("div",{className:"col-md-auto"},r.a.createElement("i",{className:l,style:{marginRight:"10px"}}),r.a.createElement(c.c,{style:{color:"white",textDecoration:"none"},to:"/profiledetail/".concat(s),onClick:this.props.navigateTo.bind(this,"/profiledetail/".concat(s))},r.a.createElement("span",null,r.a.createElement("strong",{style:{color:"white",textDecoration:"none",marginRight:"4px"}},t))),m," ",r.a.createElement("em",null,u)),r.a.createElement("div",{className:"col col-lg-2"},n)))}}]),t}(n.Component),Ot=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{location:e.location}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))}}}))(Ct);function xt(e,t,a){w.a.get("http://localhost:3000/users/notifs/"+t,{headers:{Authorization:"Bearer "+e}}).then((function(e){a({type:M,payload:e.data})})).catch((function(e){a({type:M,payload:""})}))}var St=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={notifs:[],socketNotif:[],socket:V()("http://localhost:3000")},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.onGetuserNotifes();case 2:t=localStorage.getItem("userId"),this.state.socket.connect(!0),this.state.socket.emit("join",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=this.state.socketNotif;this.state.socket.on("userLikesList",(function(a){t=t.concat(a),e.setState({socketNotif:t})}))}},{key:"componentWillUnmount",value:function(){var e=localStorage.getItem("userId");this.state.socket.emit("initLikesList",e),this.state.socket.disconnect(!0)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){200===e.getUserNotifs.code&&this.setState({notifs:e.getUserNotifs.data})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement($,null),r.a.createElement("div",null,r.a.createElement("div",{className:"content-wrapper"},r.a.createElement("section",{className:"content"},r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("h1",null,"NEW"),void 0!==this.state.socketNotif?this.state.socketNotif.map((function(e,t){return r.a.createElement(Ot,{key:t,notif:{id:e.likerId,from:e.fullname,option:{type:e.title,read:!1},date:pt()(e.time).fromNow()}})})):"",r.a.createElement("h1",null,"SEEN"),this.state.notifs?this.state.notifs.map((function(e,t){return 0===e.seen?r.a.createElement(Ot,{key:t,notif:{id:e.id,from:e.fullname,option:{type:e.categorie,read:!1},date:pt()(e.updatedAt).fromNow()}}):""})):""))))),r.a.createElement(X,null))}}]),t}(n.Component),jt=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{getUserNotifs:e.getUserNotifs.getUserNotifs,location:e.location}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onGetuserNotifes:function(){return e(function(){var e=localStorage.getItem("token"),t=localStorage.getItem("userId");return function(){var a=Object(p.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,xt(e,t,n);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}())}}}))(St),At=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"alert alert-warning",role:"alert"},r.a.createElement("i",null)," ",this.props.message," ",r.a.createElement("a",{href:this.props.link},"here")))}}]),t}(n.Component),_t=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).onLowerBoundChange=function(e){a.setState({lowerBound:+e.target.value})},a.onUpperBoundChange=function(e){a.setState({upperBound:+e.target.value})},a.onSliderChange=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({value:t}),e.next=3,a.filterUsers();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleApply=function(){var e=a.state,t=e.lowerBound,n=e.upperBound;a.setState({value:[t,n]})},a.handleSelectChange=function(e){a.setState({selectedOption:e}),setTimeout(Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.filterUsers();case 2:case"end":return e.stop()}}),e)}))),50)},a.onChange=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"sortBy"!==t.target.name&&t.preventDefault(),a.setState(Object(h.a)({},t.target.name,t.target.value)),setTimeout(Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.filterUsers();case 2:case"end":return e.stop()}}),e)}))),50);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={sortBy:"age",lowerBound:18,upperBound:75,value:[18,75],SearchBar:"",rangeFame:0,rangeLocalisation:1e4,SearchBarTags:"",interestsArray:[],selectedOption:[],location:"",initialUsers:a.props.users,userBuffer:[]},a.handleUsersFilter=a.handleUsersFilter.bind(Object(b.a)(a)),a.onChange=a.onChange.bind(Object(b.a)(a)),a.handleSelectChange=a.handleSelectChange.bind(Object(b.a)(a)),a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"handleUsersFilter",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=[{userPos:this.state.location,rangeFame:this.state.rangeFame,age:this.state.value,interests:this.state.selectedOption,rangeLocalisation:parseInt(this.state.rangeLocalisation)}],e.next=4,this.props.onfetchAllUsersPublicData(a);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"UNSAFE_componentWillMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("userId"),this.setState({interestsArray:this.props.interestsArray}),e.next=4,this.props.onGetUserIntrests(t);case 4:return e.next=6,this.filterUsers();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"filterUsers",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r,s,o,i,l,c,u=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],t=this.state.initialUsers,a=this.state.value[0],n=this.state.value[1],r=[],t.forEach((function(e){e.age>=a&&e.age<=n&&r.push(e)})),t=r,s=this.state.rangeFame,r=[],t.forEach((function(e){e.fame>=s&&r.push(e)})),t=r,o=this.state.rangeLocalisation,r=[],t.forEach((function(e){e.distance<=o&&r.push(e)})),t=r,i=[],r=[],null!==this.state.selectedOption&&this.state.selectedOption.forEach((function(e){i.push(e.value)})),0!==i.length&&(t.forEach((function(e){e.tags.forEach((function(t){i.forEach((function(a){a===t&&r.push(e)}))}))})),t=r),"fame"===this.state.sortBy||"age"===this.state.sortBy?(t=Le()(t).asc((function(e){return e[u.state.sortBy]})),this.setState({userBuffer:t})):"location"===this.state.sortBy?(t=Le()(t).asc((function(e){return e.distance})),this.setState({userBuffer:t})):"tags"===this.state.sortBy&&(l=[],null!==this.state.interestsArray&&this.state.interestsArray.forEach((function(e){l.push(e.value)})),c=[],l.forEach((function(e){t.forEach((function(t){t.tags.forEach((function(a){a===e&&c.push(t)}))}))})),t=c,this.setState({userBuffer:t}));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.userBuffer;return r.a.createElement("div",null,r.a.createElement("form",{style:{marginBottom:"2rem"}},r.a.createElement("div",{className:"",style:{display:"flex",justifyContent:"space-around"}},r.a.createElement("div",{className:"",style:Tt},r.a.createElement("h4",null,"Age"),r.a.createElement("p",null,"from ",this.state.value[0]," to ",this.state.value[1]),r.a.createElement(ae.a,{allowCross:!1,value:this.state.value,onChange:this.onSliderChange}),r.a.createElement("h4",null,"Fame"),r.a.createElement("p",null,"search users above ",this.state.rangeFame," Fame"),r.a.createElement("input",{type:"range",className:"custom-range",id:"rangeFame",name:"rangeFame",min:"0",max:"100",value:this.state.rangeFame,onChange:this.onChange})),r.a.createElement("div",{className:"",style:Tt},r.a.createElement("h4",null,"Localisation"),r.a.createElement("p",null,"search users ",this.state.rangeLocalisation,"km","".concat(this.state.rangeLocalisation>1?"s":"")," from you"),r.a.createElement("input",{type:"range",className:"custom-range",id:"rangeLocalisation",name:"rangeLocalisation",min:"1",max:"10000",value:this.state.rangeLocalisation,onChange:this.onChange}),r.a.createElement("h4",null,"Interests"),r.a.createElement(Z.a,{isMulti:!0,isSearchable:!0,placeholder:"Filter interests",value:this.state.selectedOption,onChange:this.handleSelectChange,options:this.state.interestsArray}))),r.a.createElement("div",{style:{padding:"2rem"}},r.a.createElement("div",{style:{backgroundColor:"grey",height:"2rem",display:"flex",justifyContent:"center",alignItems:"center"}}," ",r.a.createElement("h4",null,"SORT BY")),r.a.createElement("div",{style:{backgroundColor:"grey",height:"5rem",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{style:Bt},r.a.createElement("div",null,"Age"),r.a.createElement("input",{type:"radio",name:"sortBy",value:"age",checked:"age"===this.state.sortBy,onChange:this.onChange})),r.a.createElement("div",{style:Bt},r.a.createElement("div",null,"Distance"),r.a.createElement("input",{type:"radio",name:"sortBy",value:"location",checked:"location"===this.state.sortBy,onChange:this.onChange})),r.a.createElement("div",{style:Bt},r.a.createElement("div",null,"Tags"),r.a.createElement("input",{type:"radio",name:"sortBy",value:"tags",checked:"tags"===this.state.sortBy,onChange:this.onChange})),r.a.createElement("div",{style:Bt},r.a.createElement("div",null,"Fame"),r.a.createElement("input",{type:"radio",name:"sortBy",value:"fame",checked:"fame"===this.state.sortBy,onChange:this.onChange}))))),r.a.createElement(Te,{users:e}))}}]),t}(n.Component),Bt={textAlign:"center",width:"24%"},Tt={width:"45%",float:"left",padding:"1rem",backgroundColor:"lightgray",marginTop:"2rem"},Ft=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{getUserInterests:e.getUserInterests.getUserInterests}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onGetUserIntrests:function(t){return e(te(t))}}}))(_t),Lt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={firstname:"",singleHObbi:"",psudonym:"",lastname:"",email:"",age:"",multiPhotos:[],interestsArray:[],SexualOrientation:"",ProfileCompletion:"",gender:"",location:"",Fame:"",Bibliography:"",selectedOption:[],users:[]},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"initProfileInformation",value:function(e){var t=e.info,a=e.tags;this.setState({firstname:t.firstname,psudonym:t.pseudo,lastname:t.lastname,email:t.email,age:t.age,selectedOption:a,SexualOrientation:t.sexual_orientation,ProfileCompletion:t.profile_completion,gender:t.gender,location:t.localisation,Fame:t.fame,Bibliography:t.bio}),setTimeout((function(){}),500)}},{key:"initUsers",value:function(e){this.setState({users:e}),setTimeout((function(){}),500)}},{key:"initInterestArray",value:function(e){this.setState({interestsArray:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){void 0!==e.getProfileInfo.data&&this.initProfileInformation(e.getProfileInfo.data),void 0!==e.getUserInterests&&200===e.getUserInterests.code&&this.initInterestArray(e.getUserInterests.data),""===this.state.location&&""!==e.locateUser&&this.setState({location:e.locateUser}),void 0!==e.fetchAllUsersPublicData&&200===e.fetchAllUsersPublicData.code&&this.initUsers(e.fetchAllUsersPublicData.data)}},{key:"UNSAFE_componentWillMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("userId"),e.next=3,this.props.onGetUserLocation();case 3:return e.next=5,this.props.onGetUserInfo(t);case 5:({}),setTimeout(function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],null!==a.state.selectedOption&&a.state.selectedOption.forEach((function(e){n.push(e.value)})),t={Suggestion:!0,fame:parseInt(a.state.Fame),location:a.state.location,age:a.state.age,tags:n,wants:a.state.SexualOrientation},e.next=5,a.props.onfetchAllUsersPublicData(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),600);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement($,null),r.a.createElement("div",{className:"content-wrapper"},r.a.createElement("section",{className:"content"},r.a.createElement("section",{className:"content"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),this.state.ProfileCompletion<8?r.a.createElement(At,{link:"/profile",message:"Your profile is not complete, please update it"}):r.a.createElement("div",null,0===this.state.users.length?r.a.createElement("div",null," Hmm strange, we didn't find anybody that fit your profile. Please make sure you added some popular tags to your profile. Or maybe you have nobody in a 10 000km radius that fits your sexual preferences"):r.a.createElement(Ft,{users:this.state.users,interestsArray:this.state.selectedOption}))))),r.a.createElement(X,null))}}]),t}(n.Component),Mt=Object(y.b)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{locateUser:e.locateUser.locateUser,getUserInterests:e.getUserInterests.getUserInterests,getProfileInfo:e.getProfileInfo.getProfileInfo,location:e.location,fetchAllUsersPublicData:e.fetchAllUsersPublicData.fetchAllUsersPublicData}}),(function(e,t){return{navigateTo:function(t){e(Object(k.push)(t))},onGetUserInfo:function(t){return e(rt(t))},onGetUserLocation:function(){return e(Pe())},onGetCurrentUserInfo:function(t){return e(q(t))},onfetchAllUsersPublicData:function(t){return e(Ue(t))}}}))(Lt);a(270);a(271).config();var Dt=function(){var e=function(e){var t=e.component,a=Object(i.a)(e,["component"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return function(){var e=localStorage.getItem("token");if(!e)return!1;try{if(Qe()(e).exp<(new Date).getTime()/1e3)return!1}catch(t){return!1}return!0}()?r.a.createElement(t,e):r.a.createElement(l.a,{to:{pathname:"/login"}})}}))};return r.a.createElement("div",{className:"row"},r.a.createElement(c.a,null,r.a.createElement(l.d,null,r.a.createElement(e,{exact:!0,path:"/Notifications",component:jt}),r.a.createElement(e,{exact:!0,path:"/profiledetail/:id",component:Pt}),r.a.createElement(e,{exact:!0,path:"/profile",component:it}),r.a.createElement(e,{exact:!0,path:"/chat",component:vt}),r.a.createElement(e,{exact:!0,path:"/chat/",component:vt}),r.a.createElement(l.b,{exact:!0,path:"/resetpwd",component:ut}),r.a.createElement(e,{exact:!0,path:"/",component:Re}),r.a.createElement(l.b,{exact:!0,path:"/signup",component:tt}),r.a.createElement(l.b,{exact:!0,path:"/login",component:qe}),r.a.createElement(e,{exact:!0,path:"/logout",component:Ke}),r.a.createElement(e,{exact:!0,path:"/Suggestion",component:Mt}),r.a.createElement(e,{exact:!0,component:$e}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Rt=a(42),Gt={registerUser:""},Ht={authenticated:""},Wt={resetPwd:""},zt={profileEdited:""},qt={getProfileInfo:""},Yt={getUserInterests:""},Jt={fetchAllUsersPublicData:""},Kt={locateUser:""},Vt={logoutUser:""},Qt={getCurrentProfileInfo:[]},$t={getUserLikes:""},Xt={updateUserLikes:""},Zt={blockUser:""},ea={visitUser:""},ta={getUserNotifs:""},aa={reportUser:""},na={getContactChat:""},ra={saveUseRchat:""},sa={getUserChatMsg:""},oa={updateUserUnlikes:""},ia=Object(Rt.combineReducers)({updateUserUnlikes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return{updateUserUnlikes:t.payload};default:return e}},getUserChatMsg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return{getUserChatMsg:t.payload};default:return e}},getContactChat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return{getContactChat:t.payload};default:return e}},saveUseRchat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return{saveUseRchat:t.payload};default:return e}},reportUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return{reportUser:t.payload};default:return e}},getUserNotifs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return{getUserNotifs:t.payload};default:return e}},visitUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return{visitUser:t.payload};default:return e}},blockUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return{blockUser:t.payload};default:return e}},updateUserLikes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return{updateUserLikes:t.payload};default:return e}},getUserLikes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return{getUserLikes:t.payload};default:return e}},getCurrentProfileInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{getCurrentProfileInfo:t.payload};default:return e}},logoutUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return{logoutUser:t.payload};default:return e}},locateUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return{locateUser:t.payload};default:return e}},editProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return{profileEdited:t.payload};default:return e}},getUserInterests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return{getUserInterests:t.payload};default:return e}},getProfileInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return{getProfileInfo:t.payload};default:return e}},router:k.routerReducer,resetPwd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return{resetPwd:t.payload};default:return e}},loginUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return{authenticated:t.payload};default:return e}},registerUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return{registerUser:t.payload};default:return e}},fetchAllUsersPublicData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return{fetchAllUsersPublicData:t.payload};default:return e}}}),la=a(142),ca=a(143),ua=a(144),ma=a.n(ua),ha=(0,a(23).createBrowserHistory)(),pa=Object(k.routerMiddleware)(ha),fa=Object(Rt.createStore)(ia,Object(la.composeWithDevTools)(Object(Rt.applyMiddleware)(pa,ma.a,ca.a)));o.a.render(r.a.createElement(y.a,{store:fa},r.a.createElement(l.c,{history:ha},r.a.createElement("div",null,r.a.createElement(c.b,null,r.a.createElement(Dt,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},60:function(e,t,a){"use strict";a.r(t),a.d(t,"fireNotification",(function(){return r}));var n=a(29),r=function(e,t){n.b[e](t,{position:n.b.POSITION.TOP_RIGHT})}}},[[146,1,2]]]);
//# sourceMappingURL=main.96fdc1ad.chunk.js.map